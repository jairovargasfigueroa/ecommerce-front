<mat-drawer-container class="w-100 h-100" autosize>
  <!-- âœ… Drawer lateral derecho que NO tapa el catÃ¡logo -->
  <mat-drawer #drawer mode="side" position="end" [opened]="carrito.length > 0" class="p-4" style="width: 280px;">
    <h4 class="mb-3">ðŸ›’ Tu carrito</h4>
    <div>
      <button mat-raised-button color="primary" [routerLink]="'/carrito'">Ir al carrito</button>
      <button mat-raised-button color="primary" (click)="vaciarCarrito()">Vaciar carrito</button>
    </div>
    <div *ngIf="carrito.length; else carritoVacio">
      <div *ngFor="let item of carrito" class="mb-3 border-bottom pb-2">
        <mat-card class="cardWithShadow">
          <img mat-card-image [src]="item.imagen"   />
          <mat-card-content>
            <p>Nombre: {{ item.nombre }}</p>
            <p>Precio: {{ item.precio | currency }}</p>
            <p>Cantidad: ${{ item.cantidad }}</p>
            <p>Descripcion: {{ item.descripcion }}</p>

            <!-- Controles en lÃ­nea dentro del card -->
          <div class="d-flex align-items-center justify-content-between p-2 border-top">
            <button mat-icon-button color="primary" (click)="agregarProducto(item)">
              <mat-icon>add</mat-icon>
            </button>
            <button mat-icon-button color="accent" (click)="quitarProducto(item)">
              <mat-icon>remove</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="eliminarProducto(item)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>

          </mat-card-content>
          
        </mat-card>
      </div>
    </div>
    <ng-template #carritoVacio>
      <p>Tu carrito estÃ¡ vacÃ­o.</p>
    </ng-template>
  </mat-drawer>
  

  <!-- ðŸ“¦ Contenido del catÃ¡logo -->
  <mat-form-field appearance="outline" class="w-50 m-b-16">
    <mat-label>Buscar productos</mat-label>
    <input matInput placeholder="Escribe para buscar..." [(ngModel)]="filtroTexto" (ngModelChange)="filtrarProductos()" />
  </mat-form-field>

  <div>
    <button mat-raised-button color="primary" (click)="activarComandoVoz()" >Activar asistente</button>
  </div>  
  
  <div class="table-footer flex-grow-1 d-flex justify-content-center align-items-center">
    <mat-paginator
      [length]="totalProductos"
      [pageSize]="10"
      [pageSizeOptions]="[10,20,30]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
  <div mat-drawer-content class="p-4">
    <div class="row justify-content-center">
      <div class="col-lg-4" *ngFor="let producto of productos">
        <mat-card class="cardWithShadow position-relative overflow-hidden">
          <div class="position-relative">
            <img mat-card-image [src]="producto.imagen" class="w-100" />
          </div>

          <mat-card-content class="p-y-24">
            <div class="user-category">
            </div>
            <mat-card-title class="m-t-20 text-hover-primary cursor-pointer">
              {{ producto.nombre }}
            </mat-card-title>
            <p class="f-s-14 text-muted">Descripcion: {{ producto.descripcion }}</p>
            <h5 class="f-s-18 text-primary m-t-8">Precio: ${{ producto.precio }}</h5>

            <div class="d-flex align-items-center justify-content-center m-t-24">
              <button mat-flat-button color="primary" (click)="agregarProducto(producto)">
                Agregar al carrito
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>

  <!-- Paginador -->
  <div class="table-footer flex-grow-1 d-flex justify-content-center align-items-center">
    <mat-paginator
      [length]="totalProductos"
      [pageSize]="10"
      [pageSizeOptions]="[10,20,30]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</mat-drawer-container>



